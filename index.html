<!DOCTYPE html>
<html lang="en" class="bg-black text-white font-sans scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PUBG KEY GENE ESPORTS TEAM</title>

  <link rel="icon" href="assert/images/favicon.ico" type="image/x-icon" />

  <style>
    /* 全屏视频背景 */
    #video-bg {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      object-fit: cover;
      z-index: -2;
    }
    /* 粒子画布 */
    #particles-js {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      z-index: 0; /* 提升层级，让粒子背景在内容后面 */
      pointer-events: none; /* 不阻挡鼠标事件 */
    }
    /* 给页面主要内容设置层级 */
    main, section, footer, #typed-title {
      position: relative;
      z-index: 1;
    }
    /* 打字机标题样式 */
    #typed-title {
      color: #ef4444;
      font-weight: 700; /* font-bold */
      font-size: 48px;
      font-family: monospace;
      text-align: center;
      margin-top: 13vh;
      text-shadow: 0 0 5px #ff5500;
      user-select: none;
      letter-spacing: 0.1em;
      /* 初始没有动画 */
    }
    @media (min-width: 640px) {
      .breathe-title {
        font-size: 1.875rem;
      }
    }
    /* 呼吸动画 */
    @keyframes breathe {
      0%, 100% {
        opacity: 1;
        transform: scale(1);
      }
      50% {
        opacity: 0.7;
        transform: scale(1.05);
      }
    }
    /* 开启呼吸动画的类 */
    .breathe-animation {
      animation: breathe 3s ease-in-out infinite;
    }

    .fade-in { animation: fadeIn 1.2s ease-in-out both; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  
    @keyframes breathe {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.9; }
    }
    .animate-breathe {
      animation: breathe 3s ease-in-out infinite;
    }
    .animate-spin {
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
  <link href="assert/css/tailwind.min.css" rel="stylesheet" />
</head>
<body class="flex flex-col min-h-screen">

  <!-- 视频背景 -->
  <!-- <video id="video-bg" autoplay muted loop>
    <source src="https://cdn.pixabay.com/download/video/2022/03/15/video_2c970b91a3.mp4?filename=fireworks-at-night-6833.mp4" type="video/mp4" />
  </video> -->

  <!-- 粒子背景 -->
  <div id="particles-js"></div>

  <!-- 打字机标题 -->
  <div id="typed-title"></div>

  <!-- <div id="current-lang" class="text-center text-gray-400 mb-4"></div> -->

  <!-- LOGO -->
  <section class="flex-grow text-center py-16 sm:py-24 fade-in">
    <img src="assert/images/logo.png" alt="KEY GENE Logo" class="mx-auto w-72 sm:w-96 mb-6 animate-pulse" />
    <h2 class="text-2xl sm:text-4xl font-extrabold mb-4 leading-tight">
      <span data-key="line1">KEY CRACKS CIRCLE,</span><br />
      <span class="text-orange-500 font-bold" data-key="gene">GENE</span> 
      <span data-key="triggers">TRIGGERS</span> 
      <span class="text-red-500 animate-pulse" data-key="boom">BOOOOM!!!</span>
    </h2>
    <p class="text-gray-400 text-sm sm:text-lg" data-key="welcome">Welcome to the official portal of the KEY GENE esports team.</p>
  </section>

  <!-- 美化分隔元素 -->
  <section class="relative py-8 sm:py-12">
    <div class="w-24 h-1 bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 mx-auto mb-4 rounded-full animate-pulse"></div>
    <p class="text-center text-gray-300 italic text-sm sm:text-base fade-in" data-key="quote">"In the silence between chaos, GENE ignites the storm."</p>
  </section>

  <!-- About KEY GENE -->
  <section id="about" class="py-16 px-4 fade-in">
    <div class="max-w-4xl mx-auto text-center bg-white/20 rounded-xl p-8">
      <h3 class="text-3xl font-bold mb-4 text-red-500" data-key="aboutTitle">About KEY GENE</h3>
      <p class="text-lg leading-relaxed" style="color: #ff4500">
        <span class="block" data-key="aboutLine1" style="color: #ff4500">Born from childhood dreams and after-school battles,</span>
        <span class="block" data-key="aboutLine2" style="color: #ff8c00">KEY GENE is a tribute to the fearless spirit of youth.</span>
        <span class="block" data-key="aboutLine3" style="color: #ffa500">Fueled by passion,</span>
        <span class="block" data-key="aboutLine4" style="color: #ff6347">we play to ignite the arena———because the dream never faded,</span>
        <span class="block font-extrabold" data-key="aboutLine5" style="color: #ff7f50">it just got louder.</span>
        <span class="block text-2xl font-bold animate-pulse" data-key="boom" style="color: #ff2400">BOOOOM!!!</span>
      </p>
    </div>
  </section>

  <section id="stats-query" class="py-16 px-4 fade-in">
    <div class="max-w-3xl mx-auto text-center bg-white/10 rounded-xl p-8">
      <h3 class="text-3xl font-bold mb-6 text-orange-400" data-key="checkStats">Check Player Stats</h3>
      <form id="playerForm" class="flex flex-col sm:flex-row justify-center items-center gap-4">
        <input
          type="text"
          id="playerName"
          placeholder="Enter PUBG Player Name"
          class="w-full sm:w-2/3 px-4 py-2 text-black rounded-lg focus:outline-none"
          required
        />
        <button
          type="submit"
          class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-6 rounded-lg"
          data-key="searchBtn"
        >
          Search
        </button>
      </form>
  
      <!-- 战绩输出区域（无背景框） -->
      <div id="playerStats" class="mt-8 text-left text-sm sm:text-base text-gray-200 whitespace-pre-wrap
            px-4 sm:px-6 py-2 max-w-2xl mx-auto font-mono leading-relaxed">
      </div>

      <!-- 复制按钮 -->
      <div id="copyContainer" class="text-center mt-4 hidden">
        <button id="copyBtn" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded" data-key="copyBtn">
          📋 Copy Stats
        </button>
      </div>
    </div>
  </section>
  

  <!-- Join KEY GENE -->
  <section id="contact" class="py-16 px-4 fade-in">
    <div class="max-w-2xl mx-auto text-center bg-white/10 rounded-xl p-8">
      <h3 class="text-3xl font-bold mb-4 text-orange-400" data-key="joinTitle">Join KEY GENE</h3>
      <p class="text-lg text-gray-200 leading-relaxed" data-key="joinDesc1">
        If you don’t have teammates to rely on,<br />
        come join us and be part of the family.
      </p>
      <a href="mailto:keygene@hotmail.com" class="mt-4 text-2xl font-extrabold text-red-500 underline hover:text-red-400 block select-all">
        keygene@hotmail.com
      </a>
      <p class="mt-6 text-gray-300 text-lg">
        Find us in <span class="font-extrabold text-orange-400" data-key="pubg">PUBG</span> by searching <span class="font-extrabold text-yellow-400" data-key="keygene">KEYGENE</span> and join the team!
      </p>
    </div>
  </section>

  <footer class="bg-black py-6 text-center text-gray-500 text-sm" data-key="footerText">
    © 2025 KEY GENE. All Rights Reserved.
  </footer>

  <!-- 引入粒子库 -->
  <script src="assert/js/particles.min.js"></script>
  <script>
    particlesJS('particles-js', {
      "particles": {
        "number": {
          "value": 100,
          "density": {"enable": true, "value_area": 900}
        },
        "color": {"value": "#ff4500"},
        "shape": {
          "type": "circle",
          "stroke": {"width": 0, "color": "#000000"}
        },
        "opacity": {
          "value": 0.8,
          "random": true,
          "anim": {"enable": true, "speed": 1, "opacity_min": 0.3, "sync": false}
        },
        "size": {
          "value": 7,
          "random": true,
          "anim": {"enable": true, "speed": 10, "size_min": 0.2, "sync": false}
        },
        "move": {
          "enable": true,
          "speed": 8,
          "direction": "none",
          "random": true,
          "straight": false,
          "out_mode": "out",
          "bounce": false
        }
      },
      "interactivity": {
        "detect_on": "canvas",
        "events": {
          "onhover": {"enable": true, "mode": "repulse"},
          "onclick": {"enable": true, "mode": "push"},
          "resize": true
        },
        "modes": {
          "repulse": {"distance": 100, "duration": 0.4},
          "push": {"particles_nb": 10}
        }
      },
      "retina_detect": true
    });

    const text = "KEY💥GENE";
    const typedTitle = document.getElementById("typed-title");
    let idx = 0;

    function typeWriter() {
      if (idx <= text.length) {
        typedTitle.textContent = text.slice(0, idx);
        idx++;
        setTimeout(typeWriter, 150);
      } else {
        setTimeout(() => {
          typedTitle.classList.add("breathe-animation");
        }, 3000);
      }
    }

    typeWriter();
  </script>

  <script>
    // 多语言文本对象
    const texts = {
      en: {
        line1: "KEY CRACKS CIRCLE,",
        gene: "GENE",
        triggers: "TRIGGERS",
        boom: "BOOOOM!!!",
        welcome: "Welcome to the official portal of the KEY GENE esports team.",
        quote: "\"In the silence between chaos, GENE ignites the storm.\"",
        aboutTitle: "About KEY GENE",
        aboutLine1: "Born from childhood dreams and after-school battles,",
        aboutLine2: "KEY GENE is a tribute to the fearless spirit of youth.",
        aboutLine3: "Fueled by passion,",
        aboutLine4: "we play to ignite the arena———because the dream never faded,",
        aboutLine5: "it just got louder.",
        checkStats: "Check Player Stats",
        searchBtn: "Search",
        copyBtn: "📋 Copy Stats",
        joinTitle: "Join KEY GENE",
        joinDesc1: "If you don’t have teammates to rely on,<br />come join us and be part of the family.",
        pubg: "PUBG",
        keygene: "KEYGENE",
        footerText: "© 2025 KEY GENE. All Rights Reserved.",
        playerLabel: "Player",
        matchesPlayed: "Matches Played",
        kills: "Kills",
        deaths: "Deaths",
        winRate: "Win Rate",
        kdRatio: "KD Ratio",
        longestKill: "Longest Kill",
        copyBtn: "📋 Copy Stats",
        loading: "Loading...",
        playerNotFound: "❌ Player not found or an error occurred. Please check the name and try again."
      },
      zh: {
        line1: "KEY 攻入决赛圈，",
        gene: "GENE",
        triggers: "引爆",
        boom: "BOOOOM!!!",
        welcome: "欢迎来到 KEY GENE 电竞战队官方网站。",
        quote: "“混战将起，GENE 掀起风暴！”",
        aboutTitle: "关于 KEY GENE",
        aboutLine1: "源于儿时的梦想与课后的对决，",
        aboutLine2: "KEY GENE 致敬无畏的青春，",
        aboutLine3: "燃烧热血！",
        aboutLine4: "战火再燃绝地——旧梦未熄，",
        aboutLine5: "雷霆怒起！",
        checkStats: "查询玩家战绩",
        searchBtn: "搜索",
        copyBtn: "📋 复制战绩",
        joinTitle: "加入 KEY GENE",
        joinDesc1: "如果你没有稳定的队友，<br />加入我们，成为我们的战友。",
        pubg: "绝地求生",
        keygene: "KEYGENE",
        footerText: "© 2025 KEY GENE。保留所有权利。",
        playerLabel: "玩家",
        matchesPlayed: "比赛场数",
        kills: "击杀数",
        deaths: "死亡数",
        winRate: "胜率",
        kdRatio: "击杀/死亡比",
        longestKill: "最长击杀距离",
        copyBtn: "📋 复制战绩",
        loading: "加载中...",
        playerNotFound: "❌ 未找到玩家或出现错误，请检查名称后重试。"
      }
    };

    function setLanguageText(lang) {
      currentLang = lang;
      // 这里是给页面其他带 data-key 的元素做切换（你可以自己加）
      const langData = texts[lang];
      // const langData = lang === 'zh' ? texts.zh : texts.en;
      document.querySelectorAll('[data-key]').forEach(el => {
        const key = el.getAttribute('data-key');
        if (!langData[key]) return;
        // 对于带有 <br /> 的内容，使用 innerHTML；否则用 textContent
        if (langData[key].includes('<br')) {
          el.innerHTML = langData[key];
        } else {
          el.textContent = langData[key];
        }
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      console.log(navigator.languages);  // 打印语言数组
      let userLang = navigator.languages && navigator.languages.length 
        ? navigator.languages[0] 
        : navigator.language || 'en';
      userLang = userLang.toLowerCase();
      const isChinese = userLang.startsWith('zh');
      setLanguageText(isChinese ? 'zh' : 'en');

      // const langDisplay = document.getElementById('current-lang');
      // langDisplay.textContent = isChinese ? '当前语言：中文 (Chinese)' : `Current language: ${userLang}`;

    });

  </script>

  <script>
    
    const API_KEY = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJqdGkiOiI3ODRiMmVmMC01NTk1LTAxM2UtNWVjZi03NmNhZDljYTc2ODYiLCJpc3MiOiJnYW1lbG9ja2VyIiwiaWF0IjoxNzU0NTU0OTAxLCJwdWIiOiJibHVlaG9sZSIsInRpdGxlIjoicHViZyIsImFwcCI6ImtleWdlbmUifQ.ohw1lzkMISXKdGTilPhVd4V5FLaVASbhyYQ4Zms9Sms'; // 替换成你的 PUBG API Key
    const SHARD = 'steam';

    document.getElementById('playerForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const playerName = document.getElementById('playerName').value.trim();
    const output = document.getElementById('playerStats');
    const copyBtn = document.getElementById('copyBtn');
    const copyContainer = document.getElementById('copyContainer');

    output.innerHTML = `<span class="animate-spin inline-block mr-2">🔄</span> <span class="text-orange-400 font-bold">${texts[currentLang].loading}</span>`;
    copyContainer.classList.add("hidden");
    let rawText = "";

    try {
      const playerRes = await fetch(`https://api.pubg.com/shards/${SHARD}/players?filter[playerNames]=${playerName}`, {
        headers: {
          Authorization: `Bearer ${API_KEY}`,
          Accept: 'application/vnd.api+json'
        }
      });

      if (!playerRes.ok) throw new Error("Player not found");

      const playerData = await playerRes.json();
      const playerId = playerData.data[0].id;

      const seasonRes = await fetch(`https://api.pubg.com/shards/${SHARD}/players/${playerId}/seasons/lifetime`, {
        headers: {
          Authorization: `Bearer ${API_KEY}`,
          Accept: 'application/vnd.api+json'
        }
      });

      const seasonData = await seasonRes.json();
      const stats = seasonData.data.attributes.gameModeStats.squad;

      // 构造多语言复制文本
      rawText = `
  ${texts[currentLang].playerLabel}: ${playerName}
  ${texts[currentLang].matchesPlayed}: ${stats.roundsPlayed}
  ${texts[currentLang].kills}: ${stats.kills}
  ${texts[currentLang].deaths}: ${stats.losses}
  ${texts[currentLang].winRate}: ${(stats.wins / stats.roundsPlayed * 100).toFixed(2)}%
  ${texts[currentLang].kdRatio}: ${(stats.kills / stats.losses).toFixed(2)}
  ${texts[currentLang].longestKill}: ${stats.longestKill.toFixed(1)}m
      `.trim();

      output.innerHTML = `
  <span class="text-orange-400 text-lg font-bold">🔫 ${texts[currentLang].playerLabel}:</span> <span class="text-white">${playerName}</span><br/>
  🏆 <span class="text-orange-300">${texts[currentLang].matchesPlayed}:</span> ${stats.roundsPlayed}<br/>
  🎯 <span class="text-yellow-400">${texts[currentLang].kills}:</span> ${stats.kills}<br/>
  💀 <span class="text-red-400">${texts[currentLang].deaths}:</span> ${stats.losses}<br/>
  🥇 <span class="text-green-400">${texts[currentLang].winRate}:</span> ${(stats.wins / stats.roundsPlayed * 100).toFixed(2)}%<br/>
  🔥 <span class="text-pink-400">${texts[currentLang].kdRatio}:</span> ${(stats.kills / stats.losses).toFixed(2)}<br/>
  🚗 <span class="text-blue-400">${texts[currentLang].longestKill}:</span> ${stats.longestKill.toFixed(1)}m
      `;

      copyContainer.classList.remove("hidden");

      copyBtn.textContent = texts[currentLang].copyBtn;
      copyBtn.onclick = () => {
        navigator.clipboard.writeText(rawText).then(() => {
          copyBtn.textContent = "✅ Copied!";
          setTimeout(() => (copyBtn.textContent = texts[currentLang].copyBtn), 2000);
        });
      };

    } catch (err) {
      console.error(err);
      output.innerHTML = `<div class="bg-red-600 text-white px-4 py-3 rounded shadow-md">
        ${texts[currentLang].playerNotFound}
      </div>`;
    }
  });
  </script>

</body>
</html>
