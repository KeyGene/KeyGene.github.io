<!DOCTYPE html>
<html lang="en" class="bg-black text-white font-sans scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PUBG KEY GENE ESPORTS TEAM</title>

  <link rel="icon" href="assert/images/favicon.ico" type="image/x-icon" />

  <style>
    /* 全屏视频背景 */
    #video-bg {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      object-fit: cover;
      z-index: -2;
    }
    /* 粒子画布 */
    #particles-js {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      z-index: 0; /* 提升层级，让粒子背景在内容后面 */
      pointer-events: none; /* 不阻挡鼠标事件 */
    }
    /* 给页面主要内容设置层级 */
    main, section, footer, #typed-title {
      position: relative;
      z-index: 1;
    }
    /* 打字机标题样式 */
    #typed-title {
      color: #ef4444;
      font-weight: 700; /* font-bold */
      font-size: 48px;
      font-family: monospace;
      text-align: center;
      margin-top: 13vh;
      text-shadow: 0 0 5px #ff5500;
      user-select: none;
      letter-spacing: 0.1em;
      /* 初始没有动画 */
    }
    @media (min-width: 640px) {
      .breathe-title {
        font-size: 1.875rem;
      }
    }
    /* 呼吸动画 */
    @keyframes breathe {
      0%, 100% {
        opacity: 1;
        transform: scale(1);
      }
      50% {
        opacity: 0.7;
        transform: scale(1.05);
      }
    }
    /* 开启呼吸动画的类 */
    .breathe-animation {
      animation: breathe 3s ease-in-out infinite;
    }

    .fade-in { animation: fadeIn 1.2s ease-in-out both; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  
    @keyframes breathe {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.9; }
    }
    .animate-breathe {
      animation: breathe 3s ease-in-out infinite;
    }
    .animate-spin {
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
  <link href="assert/css/tailwind.min.css" rel="stylesheet" />
</head>
<body class="flex flex-col min-h-screen">

  <!-- 视频背景 -->
  <!-- <video id="video-bg" autoplay muted loop>
    <source src="https://cdn.pixabay.com/download/video/2022/03/15/video_2c970b91a3.mp4?filename=fireworks-at-night-6833.mp4" type="video/mp4" />
  </video> -->

  <!-- 粒子背景 -->
  <div id="particles-js"></div>

  <!-- 打字机标题 -->
  <div id="typed-title"></div>

  <!-- LOGO -->
  <section class="flex-grow text-center py-16 sm:py-24 fade-in">
    <img src="assert/images/logo.png" alt="KEY GENE Logo" class="mx-auto w-72 sm:w-96 mb-6 animate-pulse" />
    <h2 class="text-2xl sm:text-4xl font-extrabold mb-4 leading-tight">
      KEY CRACKS CIRCLE,<br />
      <span class="text-orange-500 font-bold">GENE</span> TRIGGERS <span class="text-red-500 animate-pulse">BOOOOM!!!</span>
    </h2>
    <p class="text-gray-400 text-sm sm:text-lg">Welcome to the official portal of the KEY GENE esports team.</p>
  </section>

  <!-- 美化分隔元素 -->
  <section class="relative py-8 sm:py-12">
    <div class="w-24 h-1 bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 mx-auto mb-4 rounded-full animate-pulse"></div>
    <p class="text-center text-gray-300 italic text-sm sm:text-base fade-in">"In the silence between chaos, GENE ignites the storm."</p>
  </section>

  <!-- About KEY GENE -->
  <section id="about" class="py-16 px-4 fade-in">
    <div class="max-w-4xl mx-auto text-center bg-white/20 rounded-xl p-8">
      <h3 class="text-3xl font-bold mb-4 text-red-500">About KEY GENE</h3>
      <p class="text-lg leading-relaxed">
        <span class="block" style="color: #ff4500">Born from childhood dreams and after-school battles,</span>  <!-- 橙红 -->
        <span class="block" style="color: #ff8c00">KEY GENE is a tribute to the fearless spirit of youth.</span>  <!-- 深橙 -->
        <span class="block" style="color: #ffa500">Fueled by passion,</span>  <!-- 橙黄 -->
        <span class="block" style="color: #ff6347">we play to ignite the arena———because the dream never faded,</span>  <!-- 番茄红 -->
        <span class="block font-extrabold" style="color: #ff7f50">it just got louder.</span>  <!-- 珊瑚色 -->
        <span class="block text-2xl font-bold animate-pulse" style="color: #ff2400">BOOOOM!!!</span>  <!-- 火焰红 -->
      </p>
    </div>
  </section>

  <section id="stats-query" class="py-16 px-4 fade-in">
    <div class="max-w-3xl mx-auto text-center bg-white/10 rounded-xl p-8">
      <h3 class="text-3xl font-bold mb-6 text-orange-400">Check Player Stats</h3>
      <form id="playerForm" class="flex flex-col sm:flex-row justify-center items-center gap-4">
        <input
          type="text"
          id="playerName"
          placeholder="Enter PUBG Player Name"
          class="w-full sm:w-2/3 px-4 py-2 text-black rounded-lg focus:outline-none"
          required
        />
        <button
          type="submit"
          class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-6 rounded-lg"
        >
          Search
        </button>
      </form>
  
      <!-- 战绩输出区域（无背景框） -->
      <div id="playerStats" class="mt-8 text-left text-sm sm:text-base text-gray-200 whitespace-pre-wrap
            px-4 sm:px-6 py-2 max-w-2xl mx-auto font-mono leading-relaxed">
      </div>

      <!-- 复制按钮 -->
      <div id="copyContainer" class="text-center mt-4 hidden">
        <button id="copyBtn" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded">
          📋 Copy Stats
        </button>
      </div>
    </div>
  </section>
  

  <!-- Join KEY GENE -->
  <section id="contact" class="py-16 px-4 fade-in">
    <div class="max-w-2xl mx-auto text-center bg-white/10 rounded-xl p-8">
      <h3 class="text-3xl font-bold mb-4 text-orange-400">Join KEY GENE</h3>
      <p class="text-lg text-gray-200 leading-relaxed">
        If you don’t have teammates to rely on,<br />
        come join us and be part of the family.
      </p>
      <a href="mailto:keygene@hotmail.com" class="mt-4 text-2xl font-extrabold text-red-500 underline hover:text-red-400 block select-all">
        keygene@hotmail.com
      </a>
      <p class="mt-6 text-gray-300 text-lg">
        Find us in <span class="font-extrabold text-orange-400">PUBG</span> by searching <span class="font-extrabold text-yellow-400">KEYGENE</span> and join the team!
      </p>
    </div>
  </section>

  <footer class="bg-black py-6 text-center text-gray-500 text-sm">
    © 2025 KEY GENE. All Rights Reserved.
  </footer>

  <!-- 引入粒子库 -->
  <script src="assert/js/particles.min.js"></script>
  <script>
    particlesJS('particles-js', {
      "particles": {
        "number": {
          "value": 100,
          "density": {"enable": true, "value_area": 900}
        },
        "color": {"value": "#ff4500"},
        "shape": {
          "type": "circle",
          "stroke": {"width": 0, "color": "#000000"}
        },
        "opacity": {
          "value": 0.8,
          "random": true,
          "anim": {"enable": true, "speed": 1, "opacity_min": 0.3, "sync": false}
        },
        "size": {
          "value": 7,
          "random": true,
          "anim": {"enable": true, "speed": 10, "size_min": 0.2, "sync": false}
        },
        "move": {
          "enable": true,
          "speed": 8,
          "direction": "none",
          "random": true,
          "straight": false,
          "out_mode": "out",
          "bounce": false
        }
      },
      "interactivity": {
        "detect_on": "canvas",
        "events": {
          "onhover": {"enable": true, "mode": "repulse"},
          "onclick": {"enable": true, "mode": "push"},
          "resize": true
        },
        "modes": {
          "repulse": {"distance": 100, "duration": 0.4},
          "push": {"particles_nb": 10}
        }
      },
      "retina_detect": true
    });

    const text = "KEY💥GENE";
    const typedTitle = document.getElementById("typed-title");
    let idx = 0;

    function typeWriter() {
      if (idx <= text.length) {
        typedTitle.textContent = text.slice(0, idx);
        idx++;
        setTimeout(typeWriter, 150);
      } else {
        setTimeout(() => {
          typedTitle.classList.add("breathe-animation");
        }, 3000);
      }
    }

    typeWriter();
  </script>

  <script>
    const API_KEY = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJqdGkiOiI3ODRiMmVmMC01NTk1LTAxM2UtNWVjZi03NmNhZDljYTc2ODYiLCJpc3MiOiJnYW1lbG9ja2VyIiwiaWF0IjoxNzU0NTU0OTAxLCJwdWIiOiJibHVlaG9sZSIsInRpdGxlIjoicHViZyIsImFwcCI6ImtleWdlbmUifQ.ohw1lzkMISXKdGTilPhVd4V5FLaVASbhyYQ4Zms9Sms'; // 替换成你的 PUBG API Key
    const SHARD = 'steam';

    document.getElementById('playerForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const playerName = document.getElementById('playerName').value.trim();
      const output = document.getElementById('playerStats');
      const copyBtn = document.getElementById('copyBtn');
      const copyContainer = document.getElementById('copyContainer');

      // 初始化状态
      output.innerHTML = `<span class="animate-spin inline-block mr-2">🔄</span> <span class="text-orange-400 font-bold">Loading...</span>`;
      copyContainer.classList.add("hidden");
      let rawText = "";

      try {
        // 获取玩家 ID
        const playerRes = await fetch(`https://api.pubg.com/shards/${SHARD}/players?filter[playerNames]=${playerName}`, {
          headers: {
            Authorization: `Bearer ${API_KEY}`,
            Accept: 'application/vnd.api+json'
          }
        });

        if (!playerRes.ok) throw new Error("Player not found");

        const playerData = await playerRes.json();
        const playerId = playerData.data[0].id;

        // 获取战绩
        const seasonRes = await fetch(`https://api.pubg.com/shards/${SHARD}/players/${playerId}/seasons/lifetime`, {
          headers: {
            Authorization: `Bearer ${API_KEY}`,
            Accept: 'application/vnd.api+json'
          }
        });

        const seasonData = await seasonRes.json();
        const stats = seasonData.data.attributes.gameModeStats.squad;

        // 构造原始文本用于复制
        rawText = `
    Player: ${playerName}
    Matches Played: ${stats.roundsPlayed}
    Kills: ${stats.kills}
    Deaths: ${stats.losses}
    Win Rate: ${(stats.wins / stats.roundsPlayed * 100).toFixed(2)}%
    KD Ratio: ${(stats.kills / stats.losses).toFixed(2)}
    Longest Kill: ${stats.longestKill.toFixed(1)}m
        `.trim();

        // 渲染美化后的内容
        output.innerHTML = `
    <span class="text-orange-400 text-lg font-bold">🔫 Player:</span> <span class="text-white">${playerName}</span><br/>
    🏆 <span class="text-orange-300">Matches Played:</span> ${stats.roundsPlayed}<br/>
    🎯 <span class="text-yellow-400">Kills:</span> ${stats.kills}<br/>
    💀 <span class="text-red-400">Deaths:</span> ${stats.losses}<br/>
    🥇 <span class="text-green-400">Win Rate:</span> ${(stats.wins / stats.roundsPlayed * 100).toFixed(2)}%<br/>
    🔥 <span class="text-pink-400">KD Ratio:</span> ${(stats.kills / stats.losses).toFixed(2)}<br/>
    🚗 <span class="text-blue-400">Longest Kill:</span> ${stats.longestKill.toFixed(1)}m
        `;

        // 显示复制按钮
        copyContainer.classList.remove("hidden");

        // 复制功能
        copyBtn.onclick = () => {
          navigator.clipboard.writeText(rawText).then(() => {
            copyBtn.textContent = "✅ Copied!";
            setTimeout(() => (copyBtn.textContent = "📋 Copy Stats"), 2000);
          });
        };
      } catch (err) {
        console.error(err);
        output.innerHTML = `<div class="bg-red-600 text-white px-4 py-3 rounded shadow-md">
          ❌ <strong>Player not found</strong> or an error occurred. Please check the name and try again.
        </div>`;
      }
    });
  </script>

</body>
</html>
